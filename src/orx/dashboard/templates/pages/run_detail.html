{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="page-header">
    <a href="/" class="back-link">â† Back to All Runs</a>
</div>

<!-- Run Header (polled while running) -->
{% include "partials/run_header.html" %}

<!-- Tabs -->
<div class="tabs">
    <button class="tab active" 
            data-tab="overview"
            hx-get="/partials/run-tab/{{ run.run_id }}?tab=overview"
            hx-target="#tab-content"
            hx-swap="innerHTML"
            onclick="setActiveTab(this)">
        ğŸ“Š Overview
    </button>
    <button class="tab"
            data-tab="artifacts"
            hx-get="/partials/run-tab/{{ run.run_id }}?tab=artifacts"
            hx-target="#tab-content"
            hx-swap="innerHTML"
            onclick="setActiveTab(this)">
        ğŸ“ Artifacts
    </button>
    <button class="tab"
            data-tab="diff"
            hx-get="/partials/run-tab/{{ run.run_id }}?tab=diff"
            hx-target="#tab-content"
            hx-swap="innerHTML"
            onclick="setActiveTab(this)">
        ğŸ“ Diff
    </button>
    <button class="tab"
            data-tab="logs"
            hx-get="/partials/run-tab/{{ run.run_id }}?tab=logs"
            hx-target="#tab-content"
            hx-swap="innerHTML"
            onclick="setActiveTab(this)">
        ğŸ“œ Logs
    </button>
    <button class="tab"
            data-tab="metrics"
            hx-get="/partials/run-tab/{{ run.run_id }}?tab=metrics"
            hx-target="#tab-content"
            hx-swap="innerHTML"
            onclick="setActiveTab(this)">
        ğŸ“ˆ Metrics
    </button>
</div>

<!-- Tab Content -->
<div id="tab-content"
     hx-get="/partials/run-tab/{{ run.run_id }}?tab=overview"
     hx-trigger="load"
     hx-swap="innerHTML">
    <div class="loading">Loading tab content...</div>
</div>
{% endblock %}

{% block scripts %}
<script>
function setActiveTab(btn) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
}
</script>
{% endblock %}
