<div class="code-toolbar">
    <div class="toolbar-info">
        {% if language %}
        <span class="language-badge">{{ language }}</span>
        {% else %}
        <span class="language-badge">text</span>
        {% endif %}
        {% if line_count %}
        <span class="line-count">{{ line_count }} lines</span>
        {% endif %}
    </div>
</div>

{% if is_binary %}
<div class="empty-state">
    <p>Binary file - preview not available</p>
    <small>{{ path }} ({{ size_bytes }} bytes)</small>
</div>
{% elif content %}
<pre class="line-numbers language-{{ language if language else 'plaintext' }}"><code class="language-{{ language if language else 'plaintext' }}">{{ content | e }}</code></pre>
<script>
    // Trigger Prism highlighting immediately after content is loaded
    (function() {
        const codeElement = document.currentScript.previousElementSibling.querySelector('code');
        if (codeElement && typeof Prism !== 'undefined') {
            Prism.highlightElement(codeElement);
        }
    })();
</script>
{% else %}
<div class="empty-state">
    <p>Empty file</p>
</div>
{% endif %}
